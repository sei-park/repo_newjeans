<!doctype html>
<html lang="en">

    <head>
        
        <meta charset="utf-8" />
        <title>Sign In | Dashonic - Admin & Dashboard Template</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta content="Premium Multipurpose Admin & Dashboard Template" name="description" />
        <meta content="Pichforest" name="author" />
        <!-- App favicon -->
        <link rel="shortcut icon" href="/xdm/v1/template/ui/assets/images/favicon.ico">

        <!-- Bootstrap Css -->
        <link href="/xdm/v1/template/ui/assets/css/bootstrap.min.css" id="bootstrap-style" rel="stylesheet" type="text/css" />
        <!-- Icons Css -->
        <link href="/xdm/v1/template/ui/assets/css/icons.min.css" rel="stylesheet" type="text/css" />
        <!-- App Css-->
        <link href="/xdm/v1/template/ui/assets/css/app.min.css" id="app-style" rel="stylesheet" type="text/css" />

    </head>

    
    <body>

    <!-- <body data-layout="horizontal"> -->

        <div class="authentication-bg min-vh-100">
            <div class="bg-overlay bg-white"></div>
            <div class="container">
                <div class="d-flex flex-column min-vh-100 px-3 pt-4">
                    <div class="row justify-content-center my-auto">
                        <div class="col-md-8 col-lg-6 col-xl-4">
                            
                            <div class="text-center py-5">
                                <div class="mb-4 mb-md-5">
                                    <a href="index.html" class="d-block auth-logo">
                                        <img src="/xdm/v1/template/ui/assets/images/logo-dark.png" alt="" height="22" class="auth-logo-dark">
                                        <img src="/xdm/v1/template/ui/assets/images/logo-light.png" alt="" height="22" class="auth-logo-light">
                                    </a>
                                </div>
                                <div class="mb-4">
                                    <h5>Welcome Back!</h5>
                                    <p>Sign in to continue to Dashonic.</p>
                                </div>
                                <form class="needs-validation" novalidate name="form" id="form">
                                    <div class="form-floating form-floating-custom mb-3">
                                        <input type="text" class="form-control" id="htmId" name="htmId" value="admin" required placeholder="Enter User Name" onkeyup="enterkey()">
                                        <label for="input-username">아이디</label>    
                                        <div class="form-floating-icon">  
                                            <i class="uil uil-users-alt"></i>
                                        </div>
                                        <div class="invalid-feedback" id="idFeedback">아이디를 입력해 주세요</div>
                                        <div class="invalid-feedback" id="idRegExp">아이디는 영대소문자, 숫자만 입력해 주세요</div>
                                    </div>
                                    <div class="form-floating form-floating-custom mb-3">
                                        <input type="password" class="form-control" id="htmPassword" name="htmPassword" value="admin1111" required placeholder="Enter Password" onkeyup="enterkey()">
                                        <label for="input-password">비밀번호</label>
                                        <div class="form-floating-icon">
                                            <i class="uil uil-padlock"></i>
                                        </div>
                                        <div class="invalid-feedback" id="pwFeedback">비밀번호를 입력해 주세요</div>
                                        <div class="invalid-feedback" id="pwRegExp">영문 숫자 조합 8자리 이상으로 입력해주세요</div>
                                    </div>

                                    <div class="form-check form-check-info font-size-16">
                                        <input class="form-check-input" type="checkbox" id="remember-check">
                                        <label class="form-check-label font-size-14" for="remember-check">
                                            아이디 기억하기
                                        </label>
                                    </div>

                                    <div class="mt-3">
                                        <button class="btn btn-info w-100" type="button" id="loginBtn">로그인</button>
                                    </div>
                             
                                    <div class="mt-4">
                                        <a href="auth-resetpassword-basic.html" class="text-muted text-decoration-underline">비밀번호 찾기</a>
                                    </div>

                                </form><!-- end form -->
                                
                                <!-- Modal --> 
								<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
									<div class="modal-dialog">
										<div class="modal-content">
											<div class="modal-header">
												<h1 class="modal-title fs-5" id="exampleModalLabel">확인해주세요</h1>
													<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
											</div>
											<div class="modal-body">아이디 또는 비밀번호가 일치하지 않습니다</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">확인</button>
											</div>
										</div>
										</div>
								</div>

                                <div class="mt-5 text-center text-muted">
                                    <p>계정이 없습니까?<a href="auth-signup-basic.html" class="fw-medium text-decoration-underline"> 회원가입하기</a></p>
                                </div>
                            </div>
                        </div><!-- end col -->
                    </div><!-- end row -->

                    <div class="row">
                        <div class="col-xl-12">
                            <div class="text-center text-muted p-4">
<!--                                 <p class="mb-0">&copy; <script>document.write(new Date().getFullYear())</script> Dashonic. Crafted with <i class="mdi mdi-heart text-danger"></i> by Pichforest</p> -->
                            </div>
                        </div><!-- end col -->
                    </div><!-- end row -->

                </div>
            </div><!-- end container -->
        </div>
        <!-- end authentication section -->

        <!-- JAVASCRIPT -->
        <script src="/xdm/v1/template/ui/assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="/xdm/v1/template/ui/assets/libs/metismenujs/metismenujs.min.js"></script>
        <script src="/xdm/v1/template/ui/assets/libs/simplebar/simplebar.min.js"></script>
        <script src="/xdm/v1/template/ui/assets/libs/feather-icons/feather.min.js"></script>
       
        <script src="/xdm/v1/jquery/jquery-3.7.1.min.js"></script>
        <script src="/xdm/v1/js/common.xdm.js"></script>
        
        <script>
        // login 
        document.getElementById("loginBtn").onclick = function() { // 로그인 버튼       
         	     
        // 아이디
        let userName = document.getElementById("htmId");
        let userNameValue = document.getElementById("htmId").value.trim();
        let userNameRegExp = /^[a-zA-Z0-9]{5,19}$/g; // 영문 대소문자로 시작하는 영문자 또는 숫자 6~20자 
            
        // 비밀번호
        let password = document.getElementById("htmPassword");
        let passwordValue = document.getElementById("htmPassword").value.trim();
        let passwordRegExp = /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,25}$/; // 비밀번호 정규식(영문 숫자 조합 8자리 이상)
        
        // 아이디 피드백
        let idFeedback = document.getElementById("idFeedback"); // 값이 없을 경우 피드백 
	    let idRegExp = document.getElementById("idRegExp"); // 정규표현식이 틀릴 경우 피드백 
	    
	    // 비밀번호 피드백
	    let pwFeedback = document.getElementById("pwFeedback"); // 값이 없을 경우 피드백 
	    let pwRegExp = document.getElementById("pwRegExp"); // 정규표현식이 틀릴 경우 피드백
	    
	 	// Validation 초기화
	 	userName.classList.remove('is-valid', 'is-invalid');    
	 	idFeedback.style.display = 'none';
	 	idRegExp.style.display = 'none';
	 	pwFeedback.style.display = 'none';
	 	pwRegExp.style.display = 'none';
	 	
    	// (아이디) 값이 비어 있거나 없을 경우 
	    if(userNameValue == "" || userNameValue == null) { 
	    	idFeedback.style.display ='block'; 
	    	userName.classList.add('is-invalid');  
	    	userName.focus(); 
 			return false;   
	    } else {
	      // by pass 	   
	    } 
    	
		// (아이디) 정규표현식에 맞지 않을 경우
	    if(!userNameRegExp.test(userNameValue)) {  
	    	idRegExp.style.display='block';
	    	userName.classList.add('is-invalid');   
	    	userName.focus(); 
	    	return false;
	    } else {                                 
	    	userName.classList.add('is-valid');
	    } 
		
	    ////////////////////////////////////////////////
		
		// (비밀번호) 값이 비어 있거나 없을 경우
		 if(passwordValue == "" || passwordValue == null) { 
			pwFeedback.style.display='block'; 
	    	password.classList.add('is-invalid');  
	    	password.focus(); 
 			return false;   
	    } else {
	      // by pass 	   
	    }
		
		// (비밀번호) 정규표현식에 맞지 않을 경우 
		if(!passwordRegExp.test(passwordValue)) {  
			pwRegExp.style.display='block';
	    	password.classList.add('is-invalid');   
	    	password.focus(); 
	    	return false;
	    } else {                                 
	    	password.classList.add('is-valid');
	    }
		
		
        $.ajax({ // AJAX 요청을 시작하는 jQuery 매서드
			async: true // 요청을 비동기로 처리 
			,cache: false // 요청 결과를 캐시하지 않도록 설정 
			,type: "post" // HTTP 매서드를 POST로 설정 
			/* ,dataType:"json" */
			,url: "/xdm/v1/infra/hotelmember/signinXdmProc" // 요청을 보낼 url 
			/* ,data : $("#formLogin").serialize() */ 
			,data : { "htmId" : $("#htmId").val(), "htmPassword" : $("#htmPassword").val()} // 사용자 id와 비밀번호를 가져와서 전송 
			,success: function(response) { // 요청이 성공적으로 완료되면 실행될 함수 
				if(response.rt == "success") { // 응답의 rt 속성이 "success" 일 경우 
					location.href="/xdm/v1/infra/hotelmember/mainPage"; // 메인페이지로 리다이렉션  
				} else {  
					$("#exampleModal").modal("show"); // 로그인 실패 시 모달 창을 띄움
					userName.classList.add('is-invalid'); 
					password.classList.add('is-invalid');
				}
			  }
          }); // ajax end
        
      } // loginBtn end
      
      // 엔터키로 로그인
      // enterkey() 함수는 keydown 이벤트 리스너에 추가되어야 함
      document.getElementById("htmId").addEventListener("keydown", enterkey);
      document.getElementById("htmPassword").addEventListener("keydown", enterkey);
      
      function enterkey() { 
    	  if (window.event.keyCode == 13) { // 엔터키 코드가 13
    		  document.getElementById("loginBtn").click(); // 로그인 버튼 클릭 이벤트 실행      
    	  }
    	}
      </script>

    </body>
</html>
