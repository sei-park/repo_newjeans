<!DOCTYPE html>
<html lang="zxx" xmlns:th="http://www.thymeleaf.org">

<head>      
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Title -->
    <title>Hotel Details</title>
    <!-- Bootstrap css -->	
    <link rel="stylesheet" href="/usr/v1/usertemplate/ui/assets/css/bootstrap.min.css" />
    <!-- animate css -->
    <link rel="stylesheet" href="/usr/v1/usertemplate/ui/assets/css/animate.min.css" />
    <!-- Fontawesome css -->
    <link rel="stylesheet" href="/usr/v1/usertemplate/ui/assets/css/fontawesome.all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.2/font/bootstrap-icons.css">
    <!-- owl.carousel css -->
    <link rel="stylesheet" href="/usr/v1/usertemplate/ui/assets/css/owl.carousel.min.css" />
    <!-- Slick css -->
    <link rel="stylesheet" type="text/css" href="/usr/v1/usertemplate/ui/assets/css/slick.min.css" />
    <!--slick-theme.css-->
<!--     <link rel="stylesheet" type="text/css" href="/usr/v1/usertemplate/ui/assets/css/slick-theme.css" /> -->
    <!-- Rangeslider css -->
    <link rel="stylesheet" href="/usr/v1/usertemplate/ui/assets/css/nouislider.css" />
    <!-- owl.theme.default css -->
    <link rel="stylesheet" href="/usr/v1/usertemplate/ui/assets/css/owl.theme.default.min.css" />
    <!-- navber css -->
    <link rel="stylesheet" href="/usr/v1/usertemplate/ui/assets/css/navber.css" />
    <!-- meanmenu css -->
    <link rel="stylesheet" href="/usr/v1/usertemplate/ui/assets/css/meanmenu.css" />
    <!-- Style css -->
    <link rel="stylesheet" href="/usr/v1/usertemplate/ui/assets/css/style.css" />
    <!-- Responsive css -->
    <link rel="stylesheet" href="/usr/v1/usertemplate/ui/assets/css/responsive.css" />
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/usr/v1/usertemplate/ui/assets/img/favicon.png">
    
    <!-- by developer --> 
	<link rel="stylesheet" href="/xdm/v1/css/datetimepicker/jquery.datetimepicker.min.css">
    
    <style>
    #htNotice {
    	font-family: 'Roboto', sans-serif;
    }
    
     /*구글 맵*/       
      #map {
      	width: 580px;
        height: 300px;   
      }

      #description {
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
      }

      #infowindow-content .title {
        font-weight: bold;
      }

      #infowindow-content {
        display: none;
      }

      #map #infowindow-content {
        display: inline;
      }
      
      .pac-card {
        margin: 10px 10px 0 0;
        border-radius: 2px 0 0 2px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        background-color: #fff;
        font-family: Roboto;
        width: 300px;
      }   

      #pac-container {
        padding-bottom: 12px;
        margin-right: 12px;
      }

      .pac-controls {
        display: inline-block;
        padding: 5px 11px;
      }

      .pac-controls label {
        font-family: Roboto;
        font-size: 13px;
        font-weight: 300;
      }

      #pac-input {
        background-color: #fff;
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
        margin-left: 12px;
        padding: 0 11px 0 13px;
        text-overflow: ellipsis;
        width: 400px;
      } 

      #pac-input:focus {
        border-color: #4d90fe;
      }

      #title {
        color: #fff;
        background-color: #4d90fe;
        font-size: 25px;
        font-weight: 500;
        padding: 6px 12px;
      }
      
      /* 객실 선택하기 체크박스 */
      .custom-checkbox {
	 	    display: inline-flex; 
	 	    align-items: center; /* 수직(위-아래) 가운데 정렬 */ 
	 	    justify-content: center; /* 수평(좌-우) 가운데 정렬 */ 
	 	    cursor: pointer; 
	 	    position: relative;
	 	    color: var(--white-color); 
	 	    background-color: var(--main-color); 
	 	    width: 150px; 
	 	    height: 50px; 
	 	    border-radius: 5px; 
	 	    text-align: center; /* 텍스트 가운데 정렬 */
	 	    transition: background-color 0.3s ease;
 	   }  
 	   
       .custom-checkbox:hover {
       	  background: #212529;
       }
       
       .custom-checkbox input[type="checkbox"] { 
          display: none;  
  	   } 
  	   
  	   .custom-checkbox.checked {
    	 background-color: #212529 !important; /* 강제 적용 */
       }
  	   

  	   
  
 
       
   
    </style>

</head>

<body>
    <!-- preloader Area -->
    <div class="preloader">
        <div class="d-table">
            <div class="d-table-cell">
                <div class="lds-spinner">
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
            </div>
        </div>
    </div>

    <!-- header -->
    <div th:replace="~{usr/v1/infra/usrmember/common/header :: header}"></div>
    
    <!-- search -->
    <div class="search-overlay">
        <div class="d-table">
            <div class="d-table-cell">
                <div class="search-overlay-layer"></div>
                <div class="search-overlay-layer"></div>
                <div class="search-overlay-layer"></div>
                <div class="search-overlay-close">
                    <span class="search-overlay-close-line"></span>
                    <span class="search-overlay-close-line"></span>
                </div>
                <div class="search-overlay-form">
                    <form>
                        <input type="text" class="input-search" placeholder="Search here...">
                        <button type="button"><i class="fas fa-search"></i></button>
                    </form>
                </div>
            </div>
        </div>
    </div>
 
    <!-- Common Banner Area -->
    <section id="common_banner">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="common_bannner_text">
                        <h2>Hotel details</h2>
                        <ul>
                            <li><a href="/v1/infra/usrmember/usrIndex">Home</a></li>
                            <li><span><i class="fas fa-circle"></i></span><a href="/v1/infra/usrmember/usrHotelList">Hotel</a></li>
                            <li><span><i class="fas fa-circle"></i></span> Hotel Details</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
	
    <!-- Hotel Search Areas -->          
    <section id="tour_details_main" class="section_padding">
    <form name="form" method="post" action="/v1/infra/usrmember/usrHotelBookingInst">
        <div class="container">
            <div class="row">  
                <div class="col-lg-8">
                    <div class="tour_details_leftside_wrapper">
                        <div class="tour_details_heading_wrapper">  
                            <div class="tour_details_top_heading">   
                                <h2 name="htName" th:text="${hotelRoomItem?.htName}">호텔 이름</h2>         
									<div style="display: flex; align-items: center;">
									    <i class="fas fa-map-marker-alt" style="margin-top:10px"></i> 
									    <h5 id="htAddress" name="htAddress" th:text="${hotelRoomItem?.htAddress}" style="margin-left: 8px; margin-top:-5px;">호텔 주소</h5>
									</div>
                            </div>             	                   
                            <div class="tour_details_top_heading_right" align="center">     
                                	<div class="cruise_content_top_right">
                                		<div th:if="${hotelRoomItem?.average_star == null}">
<!--                                 			<h5 align="center" style="font-size:13px;">등록된 후기가 없습니다</h5> -->
										</div>
										<div th:if="${hotelRoomItem?.average_star != null}">
											<i class="fas fa-star color_theme" 
 												th:each="i : ${#numbers.sequence(1, hotelRoomItem?.average_star)}">
    									    </i>
									   </div>
                                		<div th:if="${hotelRoomItem?.review_count != null}">
                                			<h4 th:text="|(${hotelRoomItem?.review_count != null ? hotelRoomItem?.review_count : 0})|"></h4>
	                                    </div> 
                                    </div>
                            </div>
                        </div>
                        <!-- <div class="tour_details_top_bottom">
                            <div class="toru_details_top_bottom_item">
                                <div class="tour_details_top_bottom_icon">
                                    <img src="/usr/v1/usertemplate/ui/assets/img/icon/ac.png" alt="icon">
                                </div>
                                <div class="tour_details_top_bottom_text">
                                    <p>Air condition</p>
                                </div>
                            </div>
                            <div class="toru_details_top_bottom_item">
                                <div class="tour_details_top_bottom_icon">
                                    <img src="/usr/v1/usertemplate/ui/assets/img/icon/tv.png" alt="icon">
                                </div>
                                <div class="tour_details_top_bottom_text">
                                    <p>Flat television</p>
                                </div>
                            </div>
                            <div class="toru_details_top_bottom_item">
                                <div class="tour_details_top_bottom_icon">
                                    <img src="/usr/v1/usertemplate/ui/assets/img/icon/gym.png" alt="icon">
                                </div>
                                <div class="tour_details_top_bottom_text">
                                    <p>Fitness center</p>
                                </div>
                            </div>
                            <div class="toru_details_top_bottom_item">
                                <div class="tour_details_top_bottom_icon">
                                    <img src="/usr/v1/usertemplate/ui/assets/img/icon/wifi.png" alt="icon">
                                </div>
                                <div class="tour_details_top_bottom_text">
                                    <p>Free Wi-fi</p>
                                </div>
                            </div>
                        </div> -->
                        <div class="tour_details_img_wrapper">
                            <div class="slider slider-for"> 
                                <div>
                                    <img src="/usr/v1/usertemplate/ui/assets/image/hotel_details_main.jpg" alt="img">
                                </div>
                                <div>
                                    <img src="/usr/v1/usertemplate/ui/assets/image/hotel_details01.jpg" alt="img">
                                </div>
                                <div>
                                    <img src="/usr/v1/usertemplate/ui/assets/image/hotel_details02.jpg" alt="img">
                                </div>
                                <div>
                                    <img src="/usr/v1/usertemplate/ui/assets/image/hotel_details03.jpg" alt="img">
                                </div>
                                <div>
                                    <img src="/usr/v1/usertemplate/ui/assets/image/hotel_details04.jpg" alt="img">
                                </div>
                            </div>
                            <div class="slider slider-nav">
                                <div>
                                    <img src="/usr/v1/usertemplate/ui/assets/image/hotel_details01.jpg" alt="img">
                                </div>
                                <div>
                                    <img src="/usr/v1/usertemplate/ui/assets/image/hotel_details02.jpg" alt="img">
                                </div>
                                <div>
                                    <img src="/usr/v1/usertemplate/ui/assets/image/hotel_details03.jpg" alt="img">
                                </div>
                                <div>
                                    <img src="/usr/v1/usertemplate/ui/assets/image/hotel_details04.jpg" alt="img">
                                </div>
                                <div>
                                    <img src="/usr/v1/usertemplate/ui/assets/image/hotel_details05.jpg" alt="img">
                                </div>
                                <div>
                                    <img src="/usr/v1/usertemplate/ui/assets/image/hotel_details06.jpg" alt="img">
                                </div>
                            </div>
                        </div>
                        <div class="tour_details_boxed">         
                            <h3 class="heading_theme">공지사항</h3>                        
                            <pre class="tour_details_boxed_inner" id="htNotice" name="htNotice" th:text="${hotelRoomItem?.htNotice}">
                            </pre>
                        </div>
                        <div class="tour_details_boxed">   
                            <h3 class="heading_theme">예약 가능한 객실</h3>
                            <div class="room_select_area">
                                <div class="tab-content" id="myTabContent">
                                    <div class="tab-pane fade show active" id="home" role="tabpanel"
                                        aria-labelledby="home-tab">
                                        <div class="room_booking_area">
                                        
                                            <div class="room_book_item" th:each="list : ${hotelDetailList}">
                                                <div class="room_book_img">
                                                    <img src="/usr/v1/usertemplate/ui/assets/image/hotel_details03.jpg" alt="img" width="240" height="150">
                                                </div>
                                                <div class="room_booking_right_side">  
                                                    <div class="room_booking_heading">
                                                        <h3 th:text="${list.htrRoomName}">객실</h3>
                                                        <p>내부 시설</p>             
                                                        <div class="room_fasa_area"> 
                                                            <ul> 
                                                                <i class="fa fa-bed" aria-hidden="true"></i><li th:if="${list.bedoption != null}" th:text="${list.bedoption}">침대옵션</li>
                                                                <img src="/usr/v1/usertemplate/ui/assets/img/icon/ac.png" alt="icon" style="width:20px; height:17px;" th:if="${list.aircondNy == 1}">
                                                                <li th:if="${list.aircondNy == 1}" th:text="'에어컨'">에어컨</li>
                                                                <i class="fa fa-bath" aria-hidden="true" th:if="${list.bathNy == 1}"></i>
                                                                <li th:if="${list.bathNy == 1}" th:text="'욕조'">욕조</li>
                                                            </ul>
                                                            <ul>
                                                                <img src="/usr/v1/usertemplate/ui/assets/img/icon/tv.png" alt="icon" style="width:20px; height:17px;" th:if="${list.tvNy == 1}">
                                                                <li th:if="${list.tvNy == 1}" th:text="'TV'">TV</li>
                                                                <img src="/usr/v1/usertemplate/ui/assets/img/icon/wifi.png" alt="icon" style="width:20px; height:17px;" th:if="${list.wifiNy == 1}">
                                                                <li th:if="${list.wifiNy == 1}" th:text="'무료 Wi-fi'">무료 Wi-fi</li>
                                                                <i class="fa fa-coffee" aria-hidden="true" th:if="${list.coffeeNy == 1}"></i>
                                                                <li th:if="${list.coffeeNy == 1}" th:text="'커피머신'">커피머신</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="room_person_select">
                                                        <h3 name="htrRoomPrice" th:text="${'₩' + #numbers.formatInteger(list.htrRoomPrice, 3, 'COMMA')}">가격<sub> / 1박</sub></h3>
<!--                                                         <select class="form-select" aria-label="Default select example"> -->
<!--                                                             <option selected>1</option> -->
<!--                                                             <option value="2">2</option> -->
<!--                                                             <option value="3">3</option>  -->
<!--                                                             <option value="4">4</option> -->
<!--                                                         </select> -->
                                                    </div>
                                                    <div class="room_person_select">
                                                    	<label class="custom-checkbox"> <!-- btn btn_theme btn_md -->
                                                    		<input type="checkbox" name="menuSeqs" id="menuSeqs" class="menu-checkbox" th:value="${list.htrseq}" th:attr="data-price=${list.htrRoomPrice != null ? list.htrRoomPrice : 0}" 
                                                    		onchange="updateTotalPrice()">
                                                    		<!-- DB에 htbTotalPrice을 넘기기 위해 hidden을 만듦 -->
                                                    		<input type="hidden" name="htbTotalPrice" id="totalPriceInput" th:value="${list.htbTotalPrice}">
                                                    		<span>선택하기</span>
                                                    	</label>
                                                    </div>
                                                </div> 
                                            </div> 
                                            
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="profile" role="tabpanel"
                                        aria-labelledby="profile-tab">
                                        <div class="write_review_inner_boxed">
                                                <div class="row">
                                                    <div class="col-lg-6">
                                                        <div class="form-froup">
                                                            <input type="text" class="form-control bg_input"
                                                                placeholder="Enter full name">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6">
                                                        <div class="form-froup">
                                                            <input type="text" class="form-control bg_input"
                                                                placeholder="Enter email address">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="form-froup">
                                                            <textarea rows="6" placeholder="Write your comments"
                                                                class="form-control bg_input"></textarea>
                                                        </div>
                                                        <div class="comment_form_submit">
                                                            <button class="btn btn_theme btn_md">Enquiry</button>
                                                        </div>
                                                    </div>
                                                </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tour_details_boxed">
                            <h3 class="heading_theme">위치</h3>
                            <!-- 구글 맵 -->
                            <div id="map" style="height: 500px; width: 100%;"></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="tour_details_right_sidebar_wrapper">
                        <div class="tour_detail_right_sidebar">
                            <div class="tour_details_right_boxed">
                                <div class="tour_details_right_box_heading">
                                    <h3>가격 확인</h3>
                                </div>
                                <div class="tour_package_bar_price">
                                    <h3 name="htrRoomPrice" th:text="${'₩' + #numbers.formatInteger(hotelRoomItem?.htrRoomPrice, 3, 'COMMA') + ' ~'}">최저가<sub> / 1박</sub></h3>
                                </div>      

                                <div class="tour_package_details_bar_list">
                                    <h5>시설</h5>
                                    <ul> 
                                        <li th:if="${hotelRoomItem?.htBreakfastNy == 1}" th:text="'조식'">옵션1</li>
                                        <li th:if="${hotelRoomItem?.htRoomServiceNy == 1}" th:text="'룸서비스'">옵션2</li>
                                        <li th:if="${hotelRoomItem?.htRestaurantNy == 1}" th:text="'레스토랑'">옵션3</li>  
                                        <li th:if="${hotelRoomItem?.htPoolNy == 1}" th:text="'수영장'">옵션4</li>
                                        <li th:if="${hotelRoomItem?.htSpaNy == 1}" th:text="'스파/온천'">옵션5</li>  
                                        <li th:if="${hotelRoomItem?.htFitnessCenterNy == 1}" th:text="'피트니스센터'">옵션6</li>
                                        <li th:if="${hotelRoomItem?.htloungeNy == 1}" th:text="'라운지'">옵션7</li>
                                        <li th:if="${hotelRoomItem?.htStockRoomNy == 1}" th:text="'물품보관소'">옵션8</li>
                                        <li th:if="${hotelRoomItem?.htParkingNy == 1}" th:text="'무료주차'">옵션9</li>
                                        <li th:if="${hotelRoomItem?.htShuttleBusNy == 1}" th:text="'셔틀버스'">옵션10</li>
                                    </ul>  
                                </div>
                            </div>
                        </div>

                        <div class="tour_detail_right_sidebar">
                            <div class="tour_details_right_boxed">
                                <div class="tour_details_right_box_heading">
                                    <h3>날짜 선택</h3>
                                </div> 
                                <div class="tour_package_details_bar_list first_child_padding_none">
                                	<div class="row mb-3">
                                		<div class="col-md-8">
                                		 	<input type="text" class="form-select" id="dateStart" name="htbcheckIn" autocomplete="off" placeholder="입실" style="cursor:pointer;">
                                        </div>
                                	</div> 
                                	<div class="row">
                                		<div class="col-md-8">
                                		 	<input type="text" class="form-select" id="dateEnd" name="htbcheckOut" autocomplete="off" placeholder="퇴실" style="cursor:pointer;">
                                        </div>
                                	</div>
                                </div>
                                <br>
                                <div class="tour_package_details_bar_list first_child_padding_none">
                                	<div class="row mb-3">
                                		<div class="col-md-8">
                                			<p>입실일 : <span id="checkIn"></span></p>
                                        </div>
                                	</div>  
                                	<div class="row mb-3">
                                		<div class="col-md-8">
                                			<p>퇴실일 : <span id="checkOut"></span></p>
                                        </div> 
                                	</div>
                                	<div class="row">
                                		<div class="col-md-8">
                                			<p>총 금액 : <span id="htbTotalPrice"></span></p>
                                        </div>  
                                	</div>
                                	<div class="comment_form_submit" style="margin-top:25px;">
                                         <button type="button" class="btn btn_theme btn_md" id="bookingBtn">예약하기</button>
                                    </div>
                                </div> 
                            </div> 
                        </div> 
                    </div>
                </div>           
            </div>
        </div>
     </form>
        
        
        
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="write_your_review_wrapper">
                        <h3 class="heading_theme">후기 작성</h3>
                        <p>별점 남기기</p>
                        <div class="write_review_inner_boxed">
                            <div class="row">
                                <div class="col-lg-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="htrestars" value="1">
                                        <label class="form-check-label" for="flexRadioDefault1">
                                            <div class="rating">
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star far fa-star"></i>
                                                <i class="rating__star far fa-star"></i>
                                                <i class="rating__star far fa-star"></i>
                                                <i class="rating__star far fa-star"></i>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="htrestars" value="4">
                                        <label class="form-check-label" for="flexRadioDefault1">
                                            <div class="rating">
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star far fa-star"></i>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                <div class="col-lg-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="htrestars"  value="2">
                                        <label class="form-check-label" for="flexRadioDefault1">
                                            <div class="rating">
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star far fa-star"></i>
                                                <i class="rating__star far fa-star"></i>
                                                <i class="rating__star far fa-star"></i>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="htrestars" value="5">
                                        <label class="form-check-label" for="flexRadioDefault1">
                                            <div class="rating">
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star fas fa-star"></i>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                <div class="col-lg-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="htrestars" id="htrestars" value="3">
                                        <label class="form-check-label" for="flexRadioDefault1">
                                            <div class="rating">
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star fas fa-star"></i>
                                                <i class="rating__star far fa-star"></i>
                                                <i class="rating__star far fa-star"></i>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <form action="!#" id="news_comment_form">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="form-froup">
                                            <input type="text" class="form-control bg_input" placeholder="아이디" name="htmId" id="htmId" 
                                            th:value="${session.sessIdUsr}">
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-froup">
                                            <input type="text" class="form-control bg_input" placeholder="이메일 주소" name="htmEmail" id="htmEmail"
                                            th:value="${session.sessEmailUsr}">
                                        </div>
                                    </div>
                                    <div class="col-lg-12 gy-3">
                                        <div class="form-froup">
                                            <textarea rows="6" placeholder="내용 작성하기" class="form-control bg_input" name="htrecomments" id="htrecomments"></textarea>
                                        </div>
                                        <div class="comment_form_submit" style="margin-top:25px;">
                                            <button type="submit" class="btn btn_theme btn_md" id="contentSaveBtn">저장하기</button>
                                        </div>
                                    </div>
                                </div> <!--row-->
                            </form>
                        </div>
                 </div>
               </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <div class="all_review_wrapper">
                        <h3 class="heading_theme">후기</h3>
                    </div>
                </div>
                	
                <div class="col-lg-12" th:if="${#lists.isEmpty(hotelReviewList)}">	  
                	<div>
                        <h5>등록된 후기가 없습니다</h5>
                    </div>								
				</div>
				
                <div class="col-lg-4 col-md-6" th:if="${!#lists.isEmpty(hotelReviewList)}" th:each="list : ${hotelReviewList}">
                    <div class="all_review_box">
                        <div class="all_review_date_area">
                            <div class="all_review_date">
                                <h5 th:text="${#dates.format(list.htreRegDate,'yyyy-MM-dd')}">날짜</h5>
                            </div>
                            <div class="all_review_star row">
	                            <div class="review_star_all" >
	                                 <i class="fas fa-star" th:each="i : ${#numbers.sequence(1, list.htrestars)}">&nbsp;</i>   
	                            </div>
                            </div> 
                        </div>     
                        <div class="all_review_text">
                            <img src="/usr/v1/usertemplate/ui/assets/image/user_img.png" alt="img">
                            <h4 th:text="${list.htmId}">아이디</h4>
                            <p th:text="${list.htrecomments}" id="htrecomments">리뷰 내용</p>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </section>

    <!-- Footer  -->
  	<div th:replace="~{usr/v1/infra/usrmember/common/footer :: footer}"></div>

    <div class="copyright_area">
        <div class="container">
            <div class="row align-items-center">
                <div class="co-lg-6 col-md-6 col-sm-12 col-12">
                    <div class="copyright_left">
                        <!-- <p>Copyright © 2022 All Rights Reserved</p> -->
                    </div>
                </div>
                <div class="co-lg-6 col-md-6 col-sm-12 col-12">
                    <div class="copyright_right">
                        <img src="/usr/v1/usertemplate/ui/assets/image/main_logo_01.png" alt="img">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="go-top">
        <i class="fas fa-chevron-up"></i>
        <i class="fas fa-chevron-up"></i>
    </div>

    <script src="/usr/v1/usertemplate/ui/assets/js/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap js -->
    <script src="/usr/v1/usertemplate/ui/assets/js/bootstrap.bundle.js"></script>
    <!-- Meanu js -->
    <script src="/usr/v1/usertemplate/ui/assets/js/jquery.meanmenu.js"></script>
    <!-- Range js -->
    <script src="/usr/v1/usertemplate/ui/assets/js/nouislider.min.js"></script>
    <script src="/usr/v1/usertemplate/ui/assets/js/wNumb.js"></script>
    <!-- owl carousel js -->
    <script src="/usr/v1/usertemplate/ui/assets/js/owl.carousel.min.js"></script>
    <!-- Slick js -->
    <script src="/usr/v1/usertemplate/ui/assets/js/slick.min.js"></script>
    <script src="/usr/v1/usertemplate/ui/assets/js/slick-slider.js"></script>
    <!-- wow.js -->
    <script src="/usr/v1/usertemplate/ui/assets/js/wow.min.js"></script>
    <!-- Custom js -->
    <script src="/usr/v1/usertemplate/ui/assets/js/custom.js"></script>
    <script src="/usr/v1/usertemplate/ui/assets/js/add-form.js"></script>

    <!-- hotel details 별점 -->
    <script src="/usr/v1/usertemplate/ui/assets/js/star.js"></script>
    
    <!-- datetimepicker -->
    <script src="/xdm/v1/js/datetimepicker/jquery.datetimepicker.full.min.js"></script>
    
    <!-- common.js-->
    <script src="/usr/v1/js/common.js"></script>  
    
     <!-- 구글 맵 -->                                         
<!--     <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyADWyNQedLuX-WxYL6uNdz92ohBpbC-YUA&libraries=places&callback=initMap" defer></script> -->
<!--     <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap&libraries=places" async defer></script> -->
    
<!--     <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyADWyNQedLuX-WxYL6uNdz92ohBpbC-YUA&callback=initMap&libraries=places" async></script> -->

<!-- 		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyADWyNQedLuX-WxYL6uNdz92ohBpbC-YUA&callback=initMap&libraries=places&v=weekly&libraries=marker" async></script> -->
		
<!-- 		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyADWyNQedLuX-WxYL6uNdz92ohBpbC-YUA&libraries=places&v=weekly&libraries=marker&callback=initMap" defer></script> -->
		

  
    <script>
   // $("#htNotice").val().replace(/(<br>|<br\/>|<br \/>)/g, '\r\n');
     
  
	  // 구글 맵
// 	  function initMap() {
// 	        var map = new google.maps.Map(document.getElementById('map'), {
// 	          zoom: 13,
// 	        });
	
// 	        var infowindow = new google.maps.InfoWindow();
// 	        var marker = new google.maps.Marker({ // google.maps.Marker
// 	          map: map
// 	        });
	
// 	        // h5 태그에 있는 주소를 가져옴
// 	        var address = document.getElementById("htAddress").innerText;
	
// 	        // Geocoding API를 사용하여 주소를 좌표로 변환
// 	        var geocoder = new google.maps.Geocoder();
	
// 	        geocoder.geocode({ 'address': address }, function(results, status) {
// 	          if (status === 'OK') {
// 	            // 지도를 주소의 좌표로 초기화
// 	            map.setCenter(results[0].geometry.location);
// 	            marker.setPosition(results[0].geometry.location);
// 	            infowindow.setContent(address);
// 	            infowindow.open(map, marker);
// 	          } else {
// 	            alert('Geocode was not successful for the following reason: ' + status);
// 	          }  
// 	        });   
// 	    }
	  
	  
// 	   function initMap() {
// 		    const map = new google.maps.Map(document.getElementById("map"), {
// 		      center: { lat: 37.7749, lng: -122.4194 },
// 		      zoom: 13,
// 		    });
		
// 		    const geocoder = new google.maps.Geocoder();
// 		    const address = document.getElementById("htAddress").innerText;
		
// 		    geocoder.geocode({ address: address }, (results, status) => {
// 		      if (status === "OK" && results.length > 0) {
// 		        const location = results[0].geometry.location;
// 		        map.setCenter(location);
		
// 		        new google.maps.Marker({
// 		          map: map,
// 		          position: location,
// 		        });
// 		      } else {
// 		        console.error("Geocoding 실패: ", status);
// 		        alert("Geocoding 실패: " + status);
// 		      }
// 		    });
//   		}

// 	  document.addEventListener("DOMContentLoaded", () => {
// 	    console.log("DOM 준비 완료");
// 	    initMap();
// 	  }); 
	  
	  
// 	  function initMap() {
// 	        const map = new google.maps.Map(document.getElementById("map"), {
// 	          center: { lat: 37.7749, lng: -122.4194 },
// 	          zoom: 13,
// 	        });

// 	        const geocoder = new google.maps.Geocoder();
// 	        const address = document.getElementById("htAddress").innerText;

// 	        geocoder.geocode({ address: address }, (results, status) => {
// 	          if (status === "OK" && results.length > 0) {
// 	            const location = results[0].geometry.location;
// 	            map.setCenter(location);

// 	            new google.maps.Marker({
// 	              map: map,
// 	              position: location,
// 	            });
// 	          } else { 
// 	            console.error("Geocoding 실패: ", status);
// 	            alert("Geocoding 실패: " + status);
// 	          }
// 	        });
// 	      }

		async function initMap() {
	        const map = new google.maps.Map(document.getElementById("map"), {
	          center: { lat: 37.7749, lng: -122.4194 },
	          zoom: 13,
	          mapId: "map",
	        });

	        const geocoder = new google.maps.Geocoder();
	        const address = document.getElementById("htAddress").innerText;
	
	        geocoder.geocode({ address: address }, (results, status) => {
	          if (status === "OK" && results.length > 0) {
	            const location = results[0].geometry.location;
	            map.setCenter(location);
	
	            // AdvancedMarkerElement 사용
	            const advancedMarker = new google.maps.marker.AdvancedMarkerElement({
	              map: map,
	              position: location,
	              title: "Selected Location", // 마커에 툴팁 추가
	            });
	
	          } else {
	            console.error("Geocoding 실패: ", status);
	            alert("Geocoding 실패: " + status);
	          }
	        });
       }
		
	  
  
		// 달력으로 날짜 선택
		window.addEventListener('load', function() {
			$.datetimepicker.setLocale('ko'); 
		     
			// 입실일 선택 시 화면에 표시
			$("#dateStart").datetimepicker({
			    timepicker: false,
			    format: 'Y-m-d'
			}).on('change', function () {
			    const selectedDate = $(this).val();
			    $('#checkIn').text(selectedDate || ''); // 빈 문자열로 초기화
			    updateTotalPrice(); // 날짜 변경 시 금액 업데이트
			});

			// 퇴실일 선택 시 화면에 표시
			$("#dateEnd").datetimepicker({
			    timepicker: false,
			    format: 'Y-m-d'
			}).on('change', function () {
			    const selectedDate = $(this).val();
			    $('#checkOut').text(selectedDate || ''); // 빈 문자열로 초기화
			    updateTotalPrice(); // 날짜 변경 시 금액 업데이트
			});

			
		});
		

		// 입실, 퇴실 선택한 후 숙박 일수 계산 
		function calculateNights() {
	    const checkInDate = new Date(document.getElementById('checkIn').textContent || null); // checkIn에 보여지는 날짜를 반환 
	    const checkOutDate = new Date(document.getElementById('checkOut').textContent || null); // checkOut에 보여지는 날짜를 반환
	
	    // 날짜가 유효하지 않으면 숙박 일수를 0으로 반환
	    if (isNaN(checkInDate) || isNaN(checkOutDate)) {
	        return 0;
	    }
	
	    const timeDiff = checkOutDate - checkInDate; // (체크아웃날짜 - 체크인날짜)를 timeDiff에 넣음 
	    const nights = Math.ceil(timeDiff / (1000 * 60 * 60 * 24)); // 밀리초를 일 단위로 변환
	    return nights > 0 ? nights : 0; // 0박 이하 방지
	    
		}
		
		
		function updateCheckboxState() {
		    document.querySelectorAll('.menu-checkbox').forEach(checkbox => {
		        const parent = checkbox.closest('.custom-checkbox');
		        if (checkbox.checked) {
		            parent.classList.add('checked'); // 체크된 상태
		        } else {
		            parent.classList.remove('checked'); // 체크 해제 상태
		        }
		    });
		}
		
		
		// 총 객실 가격과 숙박 일수 계산
		function updateTotalPrice() {
			
		    let total = 0; // 총 금액 초기화
		    const nights = calculateNights(); // 숙박 일수 계산

		    // 숙박 일수가 0 이하이면 아무 작업도 하지 않음
		    if (nights <= 0) {
		        document.getElementById('htbTotalPrice').textContent = '0'; // 화면에 "0원" 표시
		        document.getElementById('totalPriceInput').value = 0; // 0을 totalPriceInput에 넣음   
		        return;
		    } 
		    
		    
		    // 선택된 객실의 가격 계산
		    // menu-checkbox 클래스를 가진 요소 중에서 체크된 체크박스를 모두 선택해서 반복문 실행
		    document.querySelectorAll('.menu-checkbox:checked').forEach(checkbox => { 
		    	// 현재 체크박스의 data-price 속성을 가져옴(체크된 금액)
		    	// 가져온 문자열 형태의 data-price 값을 정수로 변환 
		    	// 두 번째 매개변수 10은 10진수로 변환하라는 뜻
		    	// data-price가 null, undefined, NaN 또는 잘못된 값일 경우, 기본값으로 0을 사용(data-price 값이 없거나 유효하지 않을 경우 계산 오류를 방지) 
		    	// pricePerNight = 객실의 1박 요금 
		        const pricePerNight = parseInt(checkbox.getAttribute('data-price'), 10) || 0;  
		        total += pricePerNight * nights; // 1박 요금 * 숙박 일수
		    }); 
  
		    // 결과를 화면에 반영
		    document.getElementById('htbTotalPrice').textContent = total.toLocaleString(); // "1,000,000" 형식
		    document.getElementById('totalPriceInput').value = total; // hidden input 값 설정
		   
		} // updateTotalPrice() end 
		
		// 이벤트 리스너 등록
		document.querySelectorAll('.menu-checkbox').forEach(checkbox => {
		    checkbox.addEventListener('change', () => {
		        updateCheckboxState(); // 체크박스 상태 업데이트
		        updateTotalPrice(); // 금액 계산
		    });
		});
		
		// 날짜 변경 이벤트에서 updateTotalPrice() 호출
		document.getElementById('dateStart').addEventListener('change', updateTotalPrice);
		document.getElementById('dateEnd').addEventListener('change', updateTotalPrice);
		
		// 객실 선택 이벤트에서 updateTotalPrice() 호출
		document.querySelectorAll('.menu-checkbox').forEach(checkbox => {
    		checkbox.addEventListener('change', updateTotalPrice);
		});
		
		// 웹 페이지가 로드된 직후 updateTotalPrice() 함수를 호출하여 초기 금액을 계산하고 화면에 표시
		window.addEventListener('load', () => {
			updateCheckboxState(); // 체크박스 상태 초기화
		    updateTotalPrice(); // 초기 금액 계산
		});
	
		
		
	
		// 예약하기 버튼 - insert
		document.getElementById('bookingBtn').onclick = function(){
			
		    // 입실일과 퇴실일 확인
		    const checkInDate = document.getElementById('checkIn').textContent.trim(); // 체크인에 있는 텍스트 가져옴
		    const checkOutDate = document.getElementById('checkOut').textContent.trim(); // 체크아웃에 있는 텍스트 가져옴

		    // 객실 선택 여부 확인	
		    const selectedRooms = document.querySelectorAll('.menu-checkbox:checked'); // 객실 체크 확인

		    // 유효성 검사
		    if (!checkInDate) { // 입실일 선택이 안됐을 경우
		        alert("입실일을 선택해주세요.");
		        return; // 화면 이동 차단
		    }

		    if (!checkOutDate) { // 퇴실일 선택이 안됐을 경우 
		        alert("퇴실일을 선택해주세요.");
		        return; // 화면 이동 차단
		    }

		    if (selectedRooms.length === 0) { // 객실이 선택이 안됐을 경우 
		        alert("객실을 선택해주세요.");
		        return; // 화면 이동 차단
		    }

		    // 모든 조건이 만족되면 폼을 제출
		    form.action = "/v1/infra/usrmember/usrHotelBookingInst";
		    form.submit();
		
		}
	
		
		
		document.getElementById('contentSaveBtn').onclick = function() {
			
			let selectedStar = $("input[name='htrestars']:checked").val(); // 선택된 체크박스 값 가져오기

	        $.ajax({ // AJAX 요청을 시작하는 jQuery 매서드
				async: true // 요청을 비동기로 처리 
				,cache: false // 요청 결과를 캐시하지 않도록 설정 
				,type: "post" // HTTP 매서드를 POST로 설정 
				/* ,dataType:"json" */
				,url: "/v1/infra/usrmember/usrHotelDetailsInst" // 요청을 보낼 url 
				/* ,data : $("#formLogin").serialize() */ 
				,data : { 
					"htrestars": selectedStar,
					"htrecomments" : $("#htrecomments").val(), 
					"htreRegDate" : $("#htreRegDate").val()
				} 
				,success: function(response) { // 요청이 성공적으로 완료되면 실행될 함수 
					alert("댓글 입력 성공");
					
					let newReview = '';
					
					newReview += '<div class="all_review_box">';
				    newReview += '<div class="all_review_date_area">';
				    newReview += '<div class="all_review_date">';    
				    newReview += '<h5>' + (response.date != null ? formatDate(response.date) : '등록일 없음') + '</h5>';                        
				    newReview += '</div>';                 
				    newReview += '<div class="all_review_star row">';    
				    newReview += '<div class="review_star_all">';                          
				    newReview += '<i class="fas fa-star">' + (response.stars == null || response.stars == 0 ? '별점 없음' : '') + '</i>';                         
				    newReview += '</div>';                        
				    newReview += '</div>';                    
				    newReview += '</div>' ;        
				    newReview += '<div class="all_review_text">';             
				    newReview += '<img src="/usr/v1/usertemplate/ui/assets/image/user_img.png" alt="img">';        
				    newReview += '<h4>' + (response.memberId) + '</h4>';           
				    newReview += '<p>' + (response.comment) + '</p>';   
				    newReview += '</div>';       
				    newReview += '</div>'; 
				    
				    //console.log(newReview.length);

		            // 입력창초기화
		            $("#htrecomments").val('');
		            $("input[name='htrestars']").prop('checked', false);
				  }
				
	          }); // ajax end
	          
			return false;
	          
		} // contentSaveBtn end
		
		
		
	

		
		
			
	

 


    
    </script>
    

</body>

</html>